import User from"../../models/user.model.js";export const getUsers=async(s,e)=>{try{const s=await User.find({status:"user"});if(0===s.length||!s)return e.status(400).json({message:"There is no users here"});e.status(200).json({totalUsers:s.length,allUsers:s})}catch(s){return e.status(500).json({error:s.message})}};export const getUser=async(s,e)=>{try{const{userId:r}=s.params,t=await User.findOne({_id:r,status:"user"});if(!t||"user"!==t.status)return e.status(404).json({message:"User not found"});e.status(200).json({user:t})}catch(s){return e.status(500).json({error:s.message})}};export const createUser=async(s,e)=>{try{const{email:r,password:t}=s.body;if(await User.findOne({email:r.trim()}))return e.status(400).json({message:"User already exists"});const a=await User.create({email:r,password:t});if(!a)throw new Error("Error while creating new user");e.status(200).json({userAdmin:a})}catch(s){return e.status(500).json({error:s.message})}};export const updateUser=async(s,e)=>{try{const{userId:r}=s.params,{email:t,password:a}=s.body,n=await User.findOneAndUpdate({_id:r,status:"user"},{$set:{email:t,password:a}},{new:!0,runValidators:!0});if(!n||"user"!==n.status)return e.status(404).json({message:"User not found or not a regular user"});e.status(200).json({updatedUser:n})}catch(s){return e.status(500).json({error:s.message})}};export const deleteUser=async(s,e)=>{try{const{userId:r}=s.params;if(!await User.findOneAndDelete({_id:r,status:"user"}))throw new Error("Error while deleting");e.status(200).json({message:"The user has been deleted"})}catch(s){return e.status(500).json({error:s.message})}};