import Reagent from"../../models/reagents-model.js";const getReagents=async(e,t)=>{try{const s=t.locals.user?._id;if(!s)return t.status(401).json({message:"User not allowed."});const a=Number.parseInt(e.query.page)||1,r=Number.parseInt(e.query.limit)||10;if(Number.isNaN(a)||Number.isNaN(r))return t.status(400).json({message:"Page and limit must be valid numbers."});if(a<1||r<1)return t.status(400).json({message:"Invalid page or limit value. Must be greater than 0."});if(a>100||r>100)return t.status(400).json({message:"Page or limit value exceeds maximum of 100."});const n=(a-1)*r,o=await Reagent.countDocuments({createdBy:s}),u=Math.ceil(o/r),g=await Reagent.find({createdBy:s}).skip(n).limit(r).sort({createdAt:-1});return g&&0!==g.length?t.status(200).json({reagents:g,totalReagents:o,totalPages:u,currentPage:a}):t.status(404).json({message:"No reagents found on this page."})}catch(e){return t.status(500).json({message:"Server Error",err:e.message})}};export default getReagents;