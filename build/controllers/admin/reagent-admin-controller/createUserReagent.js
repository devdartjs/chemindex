import{z}from"zod";import{Types}from"mongoose";import User from"../../../models/user-model.js";import Reagent from"../../../models/reagents-model.js";const createUserReagentParamsSchema=z.object({userId:z.string().refine(e=>Types.ObjectId.isValid(e),{message:"Invalid user ID"})}),createUserReagentBodySchema=z.object({casNumber:z.string().min(1,"CAS number is required")}),createUserReagent=async(e,r)=>{try{const{userId:s}=createUserReagentParamsSchema.parse(e.params),t=createUserReagentBodySchema.parse(e.body),a=await User.findOne({_id:Types.ObjectId.createFromHexString(s),status:"user"});if(!a)return r.status(404).json({message:"User not found"});const o=await Reagent.create({...t,createdBy:a._id});if(!o)throw new Error("Error while creating user reagent");return r.status(201).json({message:"Reagent created",reagent:o})}catch(e){return e instanceof z.ZodError?r.status(400).json({errors:e.errors}):r.status(500).json({error:e.message})}};export default createUserReagent;