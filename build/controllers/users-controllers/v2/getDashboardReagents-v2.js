import ReagentsModel from"../../../models/reagents-model.js";export const getDashboardReagentsv2=async(e,t)=>{try{const r=t.locals.user._id,s=parseInt(e.query.page)||1,a=parseInt(e.query.limit)||6,n=(s-1)*a;if(!r)return t.status(401).json({success:!1,error:"User not authenticated"});const o=await ReagentsModel.find({userId:r}).skip(n).limit(a).sort({createdAt:-1}),c=await ReagentsModel.countDocuments({userId:r}),u=Math.ceil(c/a);return t.status(200).json({success:!0,data:{reagents:o.map(e=>({_id:e._id,casNumber:e.casNumber||"N/A",reagentName:e.reagentName||"Unnamed",local:e.local||"Unknown",quantity:e.quantity||"0"})),totalReagents:c,currentPage:s,totalPages:u}})}catch(e){return console.error("Error fetching reagents:",e),t.status(500).json({success:!1,error:"Server error"})}};